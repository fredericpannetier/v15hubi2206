<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
	
	<record id="view_hubi_packing_preparation_tree" model="ir.ui.view">
		<field name="name">hubi.packing.preparation.tree</field>
		<field name="model">sale.order.line</field>
		<field name="arch" type="xml">
			<tree string="Packing Preparation" import="false" create="false" default_order="di_done_packing, order_id, product_id" decoration-bf="di_done_packing == False" decoration-danger="di_done_packing == True" >
				<field name="order_partner_id"/> <!--attrs="{'invisible':[('di_done_packing', '=', False)]}"-->
				<field name="order_id"/>  <!--attrs="{'invisible':[('di_done_packing', '=', False)]}"-->
				<field name="di_sending_date"/>
				<field name="product_id"/> <!--attrs="{'invisible':[('di_done_packing', '=', False)]}"-->
				<field name="product_uom_qty" string="Qty" sum="product_uom_qty"/> <!--attrs="{'invisible':[('di_done_packing', '=', False)]}"-->
				<field name="di_weight" string="Weight" sum="weight"/>
				<field name="di_done_packing"/>
				<field name="di_etiquette_product" invisible = "1" />
				<button class="oe_highlight" name="print_etiq" type="object" string="Print Etiquet"  attrs="{'invisible':[('di_etiquette_product', '=', False)]}"/>
				<button class="oe_highlight" name="validation" type="object" string="Done" attrs="{'invisible':[('di_done_packing', '=', True)]}"/>
			</tree>
		</field>
	</record>
	
    <record id="report_orderline_label" model="ir.actions.report">
        <field name="name">Order Lines</field>
        <field name="model">account.invoice.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">web.external_layout</field>
        <field name="report_file">web.external_layout</field>
        <field name="attachment_use">True</field>
        <field name="attachment">(object.state in ('open','paid')) and ('INV'+(object.number or '').replace('/','')+'.pdf')</field>
    </record>
	
    <record id="hubi_packing_preparation_search" model="ir.ui.view">
        <field name="name">hubi.packing_preparation.search</field>
        <field name="model">sale.order.line</field>
        <field name="arch" type="xml">
            <search string="Search Packaging">
                <field name="di_done_packing"/>
                <separator/>
                <filter string="Packaging to do" name="todo" domain="[('di_done_packing', '=', False)]"/>
                <filter string="Packaging already done" name="done" domain="[('di_done_packing', '=', True)]"/>
            </search>    
        </field>
    </record>
    
    <!--
    <search string="Search Sales Order">
                    <filter string="To Invoice" domain="[('qty_to_invoice','!=', 0)]" help="Sales Order Lines ready to be invoiced"/>
                    <separator/>
                    <filter string="My Sales Order Lines" domain="[('salesman_id','=',uid)]" help="Sales Order Lines related to a Sales Order of mine"/>
                    <field name="order_id"/>
                    <field name="order_partner_id" operator="child_of"/>
                    <field name="product_id"/>
                    <field name="salesman_id"/>
                    <group expand="0" string="Group By">
                        <filter string="Product" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Order" domain="[]" context="{'group_by':'order_id'}"/>
                        <filter string="Salesperson" domain="[]" context="{'group_by':'salesman_id'}"/>
                    </group>
                </search>
    -->
    
	<record id="action_hubi_packing_preparation" model="ir.actions.act_window">
        <field name="name">Packing Preparation</field>
        <field name="res_model">sale.order.line</field>
        <field name="context">{'search_default_todo':1}</field>
        <field name="domain">[('product_uom_qty', '!=', 0)]</field>  
        <field name="view_ids" eval="[(5, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_hubi_packing_preparation_tree')})]"/>
    </record>
	
	</data>
</odoo>